<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="Keywords" content="" />
<meta name="Description" content="" />
<title>{/$title/}</title>
<!–[if lt IE9]>
<script type="text/javascript" language="javascript" src="{/version file="html5.js"/}"></script>
<![endif]–>

<link rel="stylesheet" type="text/css" href="{/version file='v2-widge.css'/}"/>
<link rel="stylesheet" type="text/css" href="{/version file='base.css'/}" />
<link rel="stylesheet" type="text/css" href="{/version file='icons.css'/}" />
<link rel="stylesheet" type="text/css" href="{/version file='comlogin.css'/}" />


<script type="text/javascript" language="javascript" src="{/version file="jquery-1.8.3.min.js"/}"></script>
<script type="text/javascript" language="javascript" src="{/version file='jplayer.js'/}"></script>

<link rel="stylesheet" type="text/css" href="{/version file='jplayer.blue.monday.css'/}" />
    <style type="text/css">
        /*弹窗样式*/
        .new-sign-pop{ text-align:left; padding:0px 18px 28px 18px;width:508px; overflow:hidden; background:#fff; margin:0 auto; font-family:"微软雅黑";}
        .new-sign-pop-company-ver{ text-align:left; padding:0px 18px 28px 18px;overflow:hidden; background:#fff;font-family:"微软雅黑";}
        .new-sign-tit{height:48px; color:#444; line-height:48px; border-bottom:1px dashed #e9e8e8; font-size:16px;}
        .new-sign-tab tr th{ color:#999; text-indent:15px;font-size: 14px}
        .new-sign-tab tr td{ text-indent:15px; color:#444; overflow:hidden;font-size: 14px}
        .new-sign-tab tr td em{ color:#ff4141;}
        .new-sign-tab tr.gray td{ background:#fafafa;}
        .new-sign-char{ display:block; color:#999; font-size:12px; padding:12px 0 16px 0; text-indent:15px;}
        .new-sign-btnx{overflow:hidden;font-size: 14px}
        .new-sign-btnx a.sub-btn{ display:block;width:140px; height:40px; line-height:40px; text-align:center; color:#fff; background:#66bce4; border-radius:2px; float:left; margin-left:15px;font-size: 16px}
        .new-sign-btnx span{ display:block; float:right; color:#999; line-height:40px;margin-right:15px}
        .new-sign-btnx span a{ color:#4e92c4; padding-left:2px;}

        .new-sign-popx{padding:15px 0 0 0; padding-bottom:0px; overflow:hidden;text-align:left; font-family:"微软雅黑";font-size:14px}
        .new-sign-popx li{ color:#444; padding-bottom:20px;}
        .new-sign-popx .name{display:block;margin-left: 70px}
        .new-sign-popx li .dtit{display: inline-block;width:70px;text-align: right}
        .new-sign-popx li input{ display:inline-block; vertical-align:middle;width:240px; height:34px; border:1px solid #cfcfcf; text-indent:10px; background:none;line-height: 34px;font-size:14px}
        .new-sign-popx li a.present,.new-sign-popx li a.gray{width:120px; height:30px; background:#66bce4; color:#fff; text-align:center; line-height:30px; display:inline-block; margin-right:36px;border-radius:2px;}
        .new-sign-popx li a.gray{ color:#999; background:#f0f0f0;margin-left:30px;margin-right:0px}
        .new-sign-popx li a.code-btn{ display:inline-block;padding:0 15px;height:26px; border:1px solid #58cbe0; background:#58cbe0; vertical-align:middle; margin-left:20px;  #margin-left:51px;text-align:center; line-height:24px; color:#fff;}
        .new-sign-popx li.gray2{ color:#999;}
        .new-sign-popx li a.orange{ color:#ed7f5a; text-decoration:underline;}
        .new-sign-pop-dialog .new-sign-pop{width:auto;}
        .new-sign-tab tr td a{ display:inline-block;width:78px; height:26px; border:1px solid #22a2df; text-align:center; line-height:26px; text-indent:0px; border-radius:2px;font-size: 12px}
        .pact-dialog .ui_dialog_container{padding:20px;line-height:20px;}
        .formText label.txtLabel{top:6px}
        .video_link a{background: url({/$siteurl.style/}/img/common/login_logo.jpg) no-repeat;cursor: default;}
        .video_link a:hover{background: url({/$siteurl.style/}/img/common/login_logo.jpg) no-repeat;}
    </style>
    <!--<script type="text/javascript" src="{/version file='version.js'/}"></script>-->
    <script type="text/javascript">
        window.CONFIG = {
            HOST: '{/$siteurl.style/}',
            COMBOPATH: '/js/v2/'
        }
    </script>

    <script type="text/javascript" src="{/version file='hbjs.js,jquery.min.js,util.js,class.js,shape.js,event.js,aspect.js,attribute.js,cookie.js'/}"></script>
	<script type="text/javascript" src="{/version file='global.js'/}"></script>
	<script type="text/javascript">
	hbjs.loadJS('{/$siteurl.style/}/js/v2/cqjob/common.js');
	</script>
	<style>
		/*2019.5.17新增样式*/
		.logBox{
			position: relative;
			margin:auto;
			top:200px;
			width:400px;
			height:260px;
			border-radius: 10px;
			border:none;
			box-shadow: none;
		}
		.newm-tab-userlogin{
			text-align: center;
			font-size: 18px;
			color:#444;
			font-weight: bold;
			padding-top:2em;
		}
		.logForm .formMod .formText{
			margin-left:61px;
			margin-bottom: 1em;
		}
		.logForm .formMod .formText input{
			border:1px solid #e8e8e8;
		}
		.logForm .formMod input::-moz-placeholder{
			color:#ccc;
		}
		.logForm .formMod input::-ms-input-placeholder{
			color:#ccc;
		}
		.logForm .formMod input::-webkit-input-placeholder{
			color:#ccc;
		}
		.logBef .formBtn{
			position:inherit;
			bottom:auto;
			left:0;
			width:100%;
			margin-top: 1em;
			line-height: 37px;
			font-size: 14px;
		}
		.logBef .formBtn a{
			margin:auto;
			width:247px;
			height:37px;
			color:#fff;
			background: #de4945;
			border-radius: 3px;
			display: block;
		}
		
		.leftTip{
			top:60px;
		}
		.logBef .err{
			margin-left: 60px;
		}
		.logBef .err p{
			text-align: left;
		}
	</style>
</head>
<body id="body">
<header id="header">
    <div class="hdCon">
        <div class="logo"><a href="{/$siteurl.main/}"></a></div>
    </div>
</header>
<hgroup>
    <div class="bannerBox">
        <form method="post" action="{/get_url rule="/companylogin/logindo"/} " id="frmLogin">
            <div class="logBox" style="height:320px">
                <div class="con logBef" style="height:321px" id="divLogin" {/if $islogin/}style="display:none"{//if/}>
                    <input  type="hidden" id="hddseed" name="hddseed" value="{/$seed/}">
                    <input  type="hidden" id="specil_list_type" name="specil_list_type" value="{/$specil_list_type/}">
                    <!--new title tab mijing-->
                    <div id="js-login-tab">
                            <style>
                                    /*.newm-tab-userlogin{height: 43px;border-bottom: 1px solid #dcdcdc}
                                    .newm-tab-userlogin span{padding:0 23px;display: inline-block;height: 43px;line-height: 43px;text-align: center;font-size: 16px;color: #666;font-family: "Microsoft YaHei", "微软雅黑";cursor: pointer}
                                    .newm-tab-userlogin .last{border-left:1px solid #dcdcdc;}
                                    .newm-tab-userlogin .cur{color: #2e70c1}*/
                                    .logBox .hd{height: 32px;padding-top: 0}
                                    .formMod{margin-bottom: 8px}
                            </style>
                            <div class="newm-tab-userlogin js-tab-title">
                                <span class="cur">用户名密码登录</span>
                            </div>

                            <div class="js-logintab-item"><!--这个div是我新加的-->
                                <div class="hd" style="padding-left:15px"><div class="err" id="loginMsg" ></div></div>
                                <div class="logForm" style="height:225px;padding: 0 15px 0">
                                    <div class="formMod">
                                        <span class="formText zindex"><!--<label for="txtUsername" class="txtLabel">请输入用户名</label>--><input type="text" class="text" maxlength="30" id="txtUsername" name="txtUsername" onkeydown="if(event.keyCode==13)return false;" placeholder="请输入用户名" style="width: 235px"></span>
                                        <div class="clear"></div>
                                    </div>
                                    <div class="formMod">
                                        <span class="formText zindex"><!--<label for="txtPassword" class="txtLabel">请输入密码</label>--><input type="password" class="text" maxlength="18" id="txtPassword" name="txtPassword"  onkeydown="if(event.keyCode==13)return false;" placeholder="请输入密码" style="width: 235px"></span>
                                        <div class="clear"></div>
                                    </div>

                                    <div class="formMod" id="divcode" style="display:none;">
                                        <span class="formText zindex"><input type="text" id="txtAuthCode"  class="text" name="txtAuthCode" style="width:80px;"  /></span>
                                        <span class="yzImg"><img id="imgAuthCode" src="/companylogin/verify?seed={/$seed/}"></span>
                                        <span class="tipTxt" style="width:40px;"><a id="refreshAuthCode" href="javascript:void(0);">换一换</a></span>
                                        <div class="clear"></div>
                                    </div>
                                    <div class="formBtn"><a href="javascript:void(0)"  id="btnLogin"><span>登录</span></a></div>
                                </div>
                            </div>
                    </div><!--这个结束div是我新加的-->

				</div>
                <div class="leftTip" id="loginHelpDiv" style="display:none">
                    <div class="bd">
                        <b class="arr"></b>
                        <p class="tit" >登录小提示</p>
                        <dl>
                        <dt>您是否锁定了键盘的大写功能？</dt>
                        <dd>请检查您键盘上的"Caps Lock"或"A"灯是否亮着，如果是，请先按一下"Caps Lock"键然后重新输入。</dd>
                        </dl>
                        <dl>
                        <dt>您是否忘记或不小心输入了错误的密码？</dt>
                        <dd>您可以通过拨打客服电话（{/$HuiboPhone400/}）找回密码。</dd>
                        </dl>
                        <div class="errTip orange" id="boxTipErr">5分钟内密码输错4次，您的账号将被禁用30分钟，您还有<span class="strong">3</span>次机会</div>
                    </div>
                </div>
            </div>
            <div class="con logAft" id="divLoginInfo" {/if !$islogin/}style="display:none"{//if/}>
                <div class="hd"><h3>登录信息</h3></div>
                <div class="bd">
                    <table cellpadding="0" cellspacing="0" width="100%">
                    <tbody><tr><td valign="middle" align="left" height="153"><p>您好！<em class="orange" id="emCompanyname">{/$company_name/}</em></p></td></tr></tbody></table>

                    <div class="btn"><a href="{/if $is_part/}{/get_url rule="/part/"/}{/else if (!empty($redirect))/}{/get_url rule="{/$redirect/}"/}{/else/}{/get_url rule="/index/"/}{//if/}" class="btn1 btnsF16">进入招聘中心</a><a href="{/get_url rule="/login/dologout"/}" class="btn3 btnsF16">退出</a></div>
                </div>
                <div class="bot"><i class="hbFntWes">&#xf095;</i><em>{/$HuiboPhone400/}</em></div>
            </div>
        </div>
        </form>
    </div>
</hgroup>

<script type="text/javascript">

    if(window.parent.frames.length){
        window.parent.location.href = '/';
    }

hbjs.use('@jobDialog, @hbCommon, @form, @dialog', function(m){

	var $ = m['product.hbCommon'].extend(m['cqjob.jobDialog'], m['cqjob.jobForm']),
			cookie = m['tools.cookie'],
			confirmBox = m['widge.overlay.confirmBox'],
			Dialog = m['widge.overlay.hbDialog'];

		$('#tab').find('.tabT').find('li').click(function() {
			if ($(this).hasClass('cu')) {
				return false;
			} else {
				var thisIndex = $(this).index();
				$(this).addClass('cu').siblings('li').removeClass('cu');
				$('#tab').find('.tabCon').eq(thisIndex).css({'display':'block'}).siblings('.tabCon').css({'display':'none'});
			}
		});

		$(function () {
            $.ajax({
                url: "{/get_url rule='/login/NeedCode' domain='company'/}",
                type: "post",
                data: {},
                dataType: 'jsonp',
                jsonp: "callbackparam",
                success: function (res) {
                    if(res.needCode){
                        $('#divcode').show()
                    }else{
                        $('#divcode').hide()
                    }

                }

            })

        })
		
		var companyLogin = {
			intialize: function() {
				this._initControls();
				var val = cookie.get('username');
				if (val) {
				   $('#txtUsername').focus().val(decodeURIComponent(decodeURIComponent(val)));
				}
			},
			_initControls: function(){

				$('#btnLogin').click(function(event) {
					event.preventDefault();
					companyLogin.login(this);
				});
				//$('#txtUsername').focus();
				$('#frmLogin').find(':input').keydown(function(event) {
					var e = $.event.fix(event);
					if (e.keyCode == 13) {
						$('#btnLogin').click();
					}
				});


				$('#divLogin').on('click', '#refreshAuthCode', function(){
					companyLogin.refreshAuthCode();
				});
			},
			login: function(el) {
				$(el).running();

				$('#loginMsg').html('');
				var err = '';
				var con = $('#frmLogin');
				var username = con.find('#txtUsername');
				var password = con.find('#txtPassword');
				var authcode = con.find('#txtAuthCode');
				var specil_list_type = con.find('#specil_list_type');
				if (username.val() == '') {
					err = '<i class="hbFntWes">&#xf057;</i><p>请输入用户名</p><div class="clear"></div>';
					username.focus();
				}
				else if ($.trim(username.val()).length > 30 || $.trim(username.val()).length < 2)
				{
					err = '<i class="hbFntWes">&#xf057;</i><p>请输入长度为2-30位的用户名</p><div class="clear"></div>';
					username.focus();
				}
				else if (password.val() == '') {
					err = '<i class="hbFntWes">&#xf057;</i><p>请输入密码</p><div class="clear"></div>';
					password.focus();
				}
				else if ($.trim(password.val()).length > 18 || $.trim(password.val()).length < 6) {
					err = '<i class="hbFntWes">&#xf057;</i><p>请输入长度为6-18位的密码</p><div class="clear"></div>';
					password.focus();
				}
				else if (authcode.val() == '' && authcode.is(':visible')) {
					err = '<i class="hbFntWes">&#xf057;</i><p>请输入验证码</p><div class="clear"></div>';
					authcode.focus();
				}

				if (err.length > 0) {
					$('#loginMsg').html(err);
					$(el).stopRunning();
					return;
				}

				$.ajax({
					url: "{/get_url rule='/login/logindo' domain='company'/}",
					data: con.serialize(),
					type: 'post',
                    dataType: 'jsonp',
                    jsonp: "callbackparam",
					success: function(json) {
						$(el).stopRunning();
						companyLogin.loginSuccess(json,el);
					}
				});
			},
			refreshAuthCode: function() {
				var src = '/companylogin/verify?seed={/$seed/}&rand=' + Math.random() + '';
				$('#imgAuthCode').attr('src', src);
				$('#txtAuthCode').val('');
				return false;
			},
			callbacklogin: function() {
				$('#btnLogin').click();
			},
			loginSuccess: function(json, el) {
				$('#loginMsg').html('');

				if(json && json.code && json.code=='boss_forbid'){
                    $.message(json.error, {title: '操作失败！'});
				    return ;
                }

				if (json && json.error) {
					if (json.redirect_html == 1) {
						window.location.href = "{/get_url rule="/login/loginerr/"/}-error_type-" + json.error_type + "-user_id-" + json.user_id;
						return ;
					}

					$('#loginHelpDiv').hide();
					var errorStr = '<i class="hbFntWes">&#xf057;</i><p>' + json.error + '</p><div class="clear"></div>';

					$('#loginMsg').html(errorStr);
					$('#loginMsg').show();

					if (json.invaliErr) {
						$('#boxTipErr').html(json.invaliErr);
					}
					else {
						$('#boxTipErr').html('');
					}

					if (json.error == '验证码错误') {
						$('#txtAuthCode').focus();
					}
					else {
						$('#txtPassword').val('');
						$('#txtPassword').focus();
						$('#loginHelpDiv').show();
					}


					if (json.needCode) {
						$("#divcode").show();
					}

					companyLogin.refreshAuthCode();
					return;
				}



				if (json.success) {
					$('#btnLogin').addClass('btn4Unclick').html('正在跳转');

                        {/if (!empty($redirect))/}
                        window.location.href = "{/get_url rule="{/$redirect/}"/}";
                        {/else/}
                        window.location.href = "/topiccompanystatic/CompanyStatic";
                        {//if/}

				}
			}
		}

		companyLogin.intialize();




        //这里是登录JS切换
		var placeHolderInput;
        var tabDivObj = $("#js-login-tab"),
            tabTitleObj = tabDivObj.find(".js-tab-title"),
            tabItemObj = tabDivObj.find(".js-logintab-item");
        tabTitleObj.find("span").click(function(){
            $(this).addClass("cur").siblings().removeClass("cur");
			var index = $(this).index();
            tabItemObj.hide().eq(index).show();

			if(index == 1){
				if(!placeHolderInput){
					placeHolderInput = $('#frmLogin').find(':input').placeHolder();
				}
			}

            return false;
        });

    });

</script>
</body>
</html>
